<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs') %>

<body>
    <!-- NAV -->
    <%- include('../partials/nav.ejs') %>
    <!-- MAIN -->
    <main>
        <section id="formulario">
            <form action="/users/login" method="post" id="loginForm">
                <h3>Ingresar</h3>
                <div>
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email" required>
                    <small class="error-message" id="emailError"></small>
                </div>

                <div>
                    <label for="password">Contraseña</label>
                    <input type="password" name="password" id="password" required>
                    <small class="error-message" id="passwordError"></small>
                </div>

                <div>
                    <label for="rememberme">Recuérdame</label>
                    <input type="checkbox" name="rememberme" id="rememberme">
                </div>

                <div class="enviar">
                    <input type="submit" value="Entrar">
                </div>
            </form>
            <div>
                <a class="recuperar" href="">Olvidaste tu contraseña o usuario?</a>
            </div>
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('loginForm');

            form.addEventListener('submit', function (event) {
                let isValid = true;

                // Limpiar mensajes de error
                document.querySelectorAll('.error-message').forEach(el => el.textContent = '');

                // Validar Email
                const email = document.getElementById('email').value.trim();
                if (!email) {
                    document.getElementById('emailError').textContent = 'El email es obligatorio.';
                    isValid = false;
                } else if (!isValidEmail(email)) {
                    document.getElementById('emailError').textContent = 'Debes ingresar un formato de email válido.';
                    isValid = false;
                }

                // Validar Contraseña
                const password = document.getElementById('password').value.trim();
                if (!password) {
                    document.getElementById('passwordError').textContent = 'La contraseña es obligatoria.';
                    isValid = false;
                }

                if (!isValid) {
                    event.preventDefault(); // Evitar que se envíe el formulario si hay errores
                }
            });

            function isValidEmail(email) {
                // Una forma sencilla de validar el formato del email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
        });
    </script>
</body>

</html>